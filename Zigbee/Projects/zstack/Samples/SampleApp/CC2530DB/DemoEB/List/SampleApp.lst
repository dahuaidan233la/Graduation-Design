###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         13/Mar/2025  19:54:14 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\Source\SampleApp.c                #
#    Command line       =  -f G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2530 #
#                          DB\f8wCoord.cfg (-DCPU32MHZ -DROOT=__near_func     #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2530 #
#                          DB\f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0           #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xD3E2                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 G:\STM32_MDK\STM32_Zigbee\Z #
#                          igbee\Projects\zstack\Samples\SampleApp\Source\Sam #
#                          pleApp.c -D BUILD_ALL_DEVICES -D HOLD_AUTO_START   #
#                          -D LCD_SUPPORTED -D HAL_UART=FALSE -lC             #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\DemoEB\List\ -lA         #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\DemoEB\List\             #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\DemoEB\Obj\ -e           #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstac #
#                          k\Samples\SampleApp\CC2530DB\ -I                   #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\Source\ -I            #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\ #
#                           -I G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\hal\include\ -I G:\STM32_MDK\STM32_Zigbee\Zi #
#                          gbee\Projects\zstack\Samples\SampleApp\CC2530DB\.. #
#                          \..\..\..\..\Components\hal\target\CC2530EB\ -I    #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\include\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\high_level\ -I             #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\low_level\srf04\ -I                          #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\low_level\srf04\single_chip\ -I              #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mt\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects #
#                          \zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\ #
#                          Components\osal\include\ -I                        #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\services\saddr\ -I G:\STM32_MDK\STM32_Zigbee\Zig #
#                          bee\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\services\sdata\ -I          #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\af\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\stack\nwk\ -I                     #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\sapi\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee\ #
#                          Projects\zstack\Samples\SampleApp\CC2530DB\..\..\. #
#                          .\..\..\Components\stack\sec\ -I                   #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\stack\sys\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee\P #
#                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\.. #
#                          \..\..\Components\stack\zdo\ -I                    #
#                          G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\zmac\ -I G:\STM32_MDK\STM32_Zigbee\Zigbee\Projec #
#                          ts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\. #
#                          .\Components\zmac\f8w\ -Ohz --require_prototypes   #
#    List file          =  G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\DemoEB\List\SampleApp.ls #
#                          t                                                  #
#    Object file        =  G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\DemoEB\Obj\SampleApp.r51 #
#                                                                             #
#                                                                             #
###############################################################################

G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
      1          #include <stdio.h>
      2          #include <string.h>
      3          
      4          #include "OSAL.h"
      5          #include "ZGlobals.h"
      6          #include "AF.h"
      7          #include "aps_groups.h"
      8          #include "ZDApp.h"
      9          
     10          #include "SampleApp.h"
     11          #include "SampleAppHw.h"
     12          
     13          #include "OnBoard.h"
     14          
     15          /* HAL */
     16          #include "hal_lcd.h"
     17          #include "hal_led.h"
     18          #include "hal_key.h"
     19          
     20          #include "DHT11.h"
     21          
     22          #define data_size   400  //缓冲区大小
     23          
     24          #define LED1 P1_0	//定义LED1为P10口控制
     25          
     26          //终端的数据存储在SendBuf

   \                                 In  segment XDATA_I, align 1, keep-with-next
     27          char SendBuf[8]={0x24, 0x40, 0x30, 0x01, 0x02, 0x31, 0x0d, 0x0a}; //0X00 not use
   \                     SendBuf:
   \   000000                DS 8
   \   000008                REQUIRE `?<Initializer for SendBuf>`
   \   000008                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     28          bool end1Online = false;
   \                     end1Online:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     29          bool end2Online = false;
   \                     end2Online:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     30          bool end3Online = false;
   \                     end3Online:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     31          bool end4Online = false;
   \                     end4Online:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     32          bool end5Online = false;
   \                     end5Online:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     33          int end1Time = 0;
   \                     end1Time:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     34          int end2Time = 0;
   \                     end2Time:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     35          int end3Time = 0;
   \                     end3Time:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     36          int end4Time = 0;
   \                     end4Time:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     37          int end5Time = 0;
   \                     end5Time:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     38          
     39          #if defined(ZDO_COORDINATOR)
     40          
     41          #else
     42              #define ARRAY_SIZE(arr) (sizeof(arr) / sizeof(arr)[0])
     43          #endif
     44          
     45          //---------------------------------------------------------------------
     46          //标准版不同的终端需要修改此ID,用于识别协调器发过来的数据，ID相同则处理
     47          //专业版自动从Flash获得地址，所有终端固件相同，适合量产
     48          static uint16 EndDeviceID = 0x3001; //终端ID，非常重要
     49          //---------------------------------------------------------------------
     50          
     51          
     52          //暂定6路终端
     53          //如果是协调器，用于保存所有终端的数据
     54          //如果是终端,endDevInfo[0]保留自己的数据

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     55          EndDeviceDataInfo  endDevInfo[6];
   \                     endDevInfo:
   \   000000                DS 90
   \   00005A                REQUIRE __INIT_XDATA_Z
     56          
     57          #if defined(ZDO_COORDINATOR)
     58          
     59          #else
     60              static void SerialApp_SendData_Lamp(uint8 fc);
     61             
     62              static uint8 GetHuman( void );
     63          #endif
     64              
     65          
     66          
     67          /*********************************************************************
     68           * GLOBAL VARIABLES
     69           */
     70          
     71          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
     72          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0300         DW 3
   \   000002   0200         DW 2
     73          {
     74            COOR_RF_PERIODIC_CLUSTERID,
     75            END_RF_PERIODIC_CLUSTERID
     76          };
     77          

   \                                 In  segment XDATA_ROM_C, align 1
     78          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   02           DB 2
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   02           DB 2
   \   00000A   ....         DW SampleApp_ClusterList
     79          {
     80            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
     81            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
     82            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
     83            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
     84            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
     85            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
     86            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
     87            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
     88            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
     89          };
     90          
     91          // This is the Endpoint/Interface description.  It is defined here, but
     92          // filled-in in SampleApp_Init().  Another way to go would be to fill
     93          // in the structure here and make it a "const" (in code space).  The
     94          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     95          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
     96          
     97          /*********************************************************************
     98           * EXTERNAL VARIABLES
     99           */
    100          
    101          /*********************************************************************
    102           * EXTERNAL FUNCTIONS
    103           */
    104          
    105          /*********************************************************************
    106           * LOCAL VARIABLES
    107           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    108          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    109                                    // This variable will be received when
    110                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    111          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    112          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    113          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    114          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    115          static afAddrType_t Broadcast_DstAddr;
   \                     Broadcast_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    116          static afAddrType_t SampleApp_TxAddr;
    117          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    118          aps_Group_t SampleApp_Group;
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    119          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    120          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    121          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    122          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    123          char HttpUart_RX[data_size];
   \                     HttpUart_RX:
   \   000000                DS 400
   \   000190                REQUIRE __INIT_XDATA_Z
    124          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    125          int httpCon1 = 0;
   \                     httpCon1:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    126          int httpSendOK = 0;
   \                     httpSendOK:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    127          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    128          char *did = "10001";
   \                     did:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for did>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    129          char *key = "aaaaaa";
   \                     key:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for key>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    130          int httpt = 1;
   \                     httpt:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for httpt>`
   \   000002                REQUIRE __INIT_XDATA_I
    131          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    132          uint8 zigbee_buff_rx[data_size];   //发送缓存
   \                     zigbee_buff_rx:
   \   000000                DS 400
   \   000190                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          uint16 len_buff_rx=0;       //长度
   \                     len_buff_rx:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    134          uint8 zigbee_id_tx[10];     //发送缓存
   \                     zigbee_id_tx:
   \   000000                DS 10
   \   00000A                REQUIRE __INIT_XDATA_Z
    135          
    136          //协调器用来收集5个终端数据的数组，每个终端8位

   \                                 In  segment XDATA_I, align 1, keep-with-next
    137          uint8 sensorData[41]={0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 
   \                     sensorData:
   \   000000                DS 41
   \   000029                REQUIRE `?<Initializer for sensorData>`
   \   000029                REQUIRE __INIT_XDATA_I
    138                                0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 
    139                                0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 
    140                                0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
    141                                0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30};
    142          
    143          
    144          
    145          /*********************************************************************
    146           * LOCAL FUNCTIONS
    147           */
    148          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    149          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    150          void COOR_GW_PeriodicMessage( void );
    151          
    152          
    153          static void SerialApp_ProcessMSGCmd( afIncomingMSGPacket_t *pkt );
    154          static void PrintAddrInfo(uint16 shortAddr, uint8 *pIeeeAddr);
    155          static void GetIeeeAddr(uint8 * pIeeeAddr, uint8 *pStr);
    156          static uint8 GetDataLen(uint8 fc);
    157          
    158          static void AfSendAddrInfo(void);
    159          
    160          #if defined(ZDO_COORDINATOR)
    161          
    162          #else
    163          void END_SendPeriodicMessage( void );
    164           static uint8 zigbee_send(void); //发送数据 
    165          #endif
    166          
    167          static uint8 XorCheckSum(uint8 * pBuf, uint8 len);
    168          static uint8 SendData(uint8 addr, uint8 FC);
    169          
    170          static void FS_Uart_CallBack(uint8 port,uint8 event);
    171          
    172          /*********************************************************************
    173           * @fn      SampleApp_Init
    174           *
    175           * @brief   Initialization function for the Generic App Task.
    176           *          This is called during initialization and should contain
    177           *          any application specific initialization (ie. hardware
    178           *          initialization/setup, table initialization, power up
    179           *          notificaiton ... ).
    180           *
    181           * @param   task_id - the ID assigned by OSAL.  This ID should be
    182           *                    used to send messages and set timers.
    183           *
    184           * @return  none
    185           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    186          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    187          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 29
   \   000005   74E3         MOV     A,#-0x1d
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
    188            SampleApp_TaskID = task_id;
   \   00000B   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000E   F0           MOVX    @DPTR,A
    189            SampleApp_NwkState = DEV_INIT;
   \   00000F   90....       MOV     DPTR,#SampleApp_NwkState
   \   000012   7401         MOV     A,#0x1
   \   000014   F0           MOVX    @DPTR,A
    190            SampleApp_TransID = 0;
   \   000015   90....       MOV     DPTR,#SampleApp_TransID
   \   000018   E4           CLR     A
   \   000019   F0           MOVX    @DPTR,A
    191            
    192            halUARTCfg_t uartConfig;
    193            
    194            uartConfig.configured           = TRUE;              // 2x30 don't care - see uart driver.
   \   00001A   85..82       MOV     DPL,?XSP + 0
   \   00001D   85..83       MOV     DPH,?XSP + 1
   \   000020   04           INC     A
   \   000021   F0           MOVX    @DPTR,A
    195            uartConfig.baudRate             = HAL_UART_BR_115200;
   \   000022   12....       LCALL   ?XSTACK_DISP0_8
   \   000025   7404         MOV     A,#0x4
   \   000027   F0           MOVX    @DPTR,A
    196            uartConfig.flowControl          = FALSE;
   \   000028   7402         MOV     A,#0x2
   \   00002A   12....       LCALL   ?XSTACK_DISP0_8
   \   00002D   E4           CLR     A
   \   00002E   F0           MOVX    @DPTR,A
    197            uartConfig.flowControlThreshold = 32; // 2x30 don't care - see uart driver.
   \   00002F   7403         MOV     A,#0x3
   \   000031   12....       LCALL   ?XSTACK_DISP0_8
   \   000034   7420         MOV     A,#0x20
   \   000036   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    198            uartConfig.rx.maxBufSize        = 32;  // 2x30 don't care - see uart driver.
   \                     ??CrossCallReturnLabel_28:
   \   000039   740A         MOV     A,#0xa
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   7420         MOV     A,#0x20
   \   000040   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    199            uartConfig.tx.maxBufSize        = 32;  // 2x30 don't care - see uart driver.
   \                     ??CrossCallReturnLabel_29:
   \   000043   7412         MOV     A,#0x12
   \   000045   12....       LCALL   ?XSTACK_DISP0_8
   \   000048   7420         MOV     A,#0x20
   \   00004A   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    200            uartConfig.idleTimeout             = 6;   // 2x30 don't care - see uart driver.
   \                     ??CrossCallReturnLabel_30:
   \   00004D   7405         MOV     A,#0x5
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \   000052   7406         MOV     A,#0x6
   \   000054   F0           MOVX    @DPTR,A
    201            uartConfig.intEnable                = TRUE;              // 2x30 don't care - see uart driver.
   \   000055   7416         MOV     A,#0x16
   \   000057   12....       LCALL   ?XSTACK_DISP0_8
   \   00005A   7401         MOV     A,#0x1
   \   00005C   F0           MOVX    @DPTR,A
    202            uartConfig.callBackFunc          = FS_Uart_CallBack;  //指定串口回调函数
   \   00005D   741B         MOV     A,#0x1b
   \   00005F   12....       LCALL   ?XSTACK_DISP0_8
   \   000062   74..         MOV     A,#??FS_Uart_CallBack?relay & 0xff
   \   000064   F0           MOVX    @DPTR,A
   \   000065   A3           INC     DPTR
   \   000066   74..         MOV     A,#(??FS_Uart_CallBack?relay >> 8) & 0xff
   \   000068   F0           MOVX    @DPTR,A
    203            HalUARTOpen (HAL_UART_PORT_0, &uartConfig);
   \   000069                ; Setup parameters for call to function HalUARTOpen
   \   000069   85..82       MOV     DPL,?XSP + 0
   \   00006C   85..83       MOV     DPH,?XSP + 1
   \   00006F   AA82         MOV     R2,DPL
   \   000071   AB83         MOV     R3,DPH
   \   000073   7900         MOV     R1,#0x0
   \   000075   12....       LCALL   ??HalUARTOpen?relay
    204            HalUARTOpen (HAL_UART_PORT_1, &uartConfig);
   \   000078                ; Setup parameters for call to function HalUARTOpen
   \   000078   85..82       MOV     DPL,?XSP + 0
   \   00007B   85..83       MOV     DPH,?XSP + 1
   \   00007E   AA82         MOV     R2,DPL
   \   000080   AB83         MOV     R3,DPH
   \   000082   7901         MOV     R1,#0x1
   \   000084   12....       LCALL   ??HalUARTOpen?relay
    205            
    206          
    207            //HalUARTWrite(HAL_UART_PORT_1,"UartIni04 RR\n", sizeof("UartInitr OK\n"));
    208            
    209            
    210            //------------------------配置串口---------------------------------
    211            //MT_UartInit();                    //串口初始化
    212            //MT_UartRegisterTaskID(task_id);   //注册串口任务
    213          //  #if ( HAL_UART_DMA == 1 )
    214          //  HalUARTWrite(HAL_UART_PORT_0,"UartIniVV d1\n", sizeof("UartInitr OK\n"));
    215          //  #endif
    216          //    #if ( HAL_UART_DMA == 2 )
    217          //  HalUARTWrite(HAL_UART_PORT_0,"UartIniVV d2\n", sizeof("UartInitr OK\n"));
    218          //  #endif
    219          //    #if ( HAL_UART_ISR == 1 )
    220          //  HalUARTWrite(HAL_UART_PORT_0,"UartIniVV S1\n", sizeof("UartInitr OK\n"));
    221          //  #endif
    222          //    #if ( HAL_UART_ISR == 2 )
    223          //  HalUARTWrite(HAL_UART_PORT_0,"UartIniVV S2\n", sizeof("UartInitr OK\n"));
    224          //  #endif
    225          
    226            
    227            //HalUARTWrite(HAL_UART_PORT_0, "EFFFf11", strlen("EFFFf11")); 
    228            
    229            #if defined(ZDO_COORDINATOR)
    230            
    231            #else
    232              P1DIR |= 0x01;  //P1_0定义为输出
    233              LED1 = 1;       //LED1灯熄灭     
    234             #endif	
    235          
    236                  
    237            Broadcast_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   000087   12....       LCALL   ?Subroutine3 & 0xFFFF
    238            Broadcast_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
    239            Broadcast_DstAddr.addr.shortAddr = 0xFFFF;
    240                  
    241            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \                     ??CrossCallReturnLabel_6:
   \   00008A   90....       MOV     DPTR,#SampleApp_epDesc
   \   00008D   7414         MOV     A,#0x14
   \   00008F   F0           MOVX    @DPTR,A
    242            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   000090   A3           INC     DPTR
   \   000091   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   000093   F0           MOVX    @DPTR,A
   \   000094   A3           INC     DPTR
   \   000095   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   000097   F0           MOVX    @DPTR,A
    243            SampleApp_epDesc.simpleDesc = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   000098   A3           INC     DPTR
   \   000099   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   00009B   F0           MOVX    @DPTR,A
   \   00009C   A3           INC     DPTR
   \   00009D   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   00009F   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    244            SampleApp_epDesc.latencyReq = noLatencyReqs;
    245            
    246            afRegister( &SampleApp_epDesc );
   \                     ??CrossCallReturnLabel_27:
   \   0000A2                ; Setup parameters for call to function afRegister
   \   0000A2   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   0000A4   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   0000A6   12....       LCALL   ??afRegister?relay
    247          
    248            RegisterForKeys( SampleApp_TaskID );
   \   0000A9                ; Setup parameters for call to function RegisterForKeys
   \   0000A9   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   F9           MOV     R1,A
   \   0000AE   12....       LCALL   ??RegisterForKeys?relay
    249          
    250            // By default, all devices start out in Group 1
    251            SampleApp_Group.ID = 0x0001;
   \   0000B1   90....       MOV     DPTR,#SampleApp_Group
   \   0000B4   7401         MOV     A,#0x1
   \   0000B6   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    252            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \                     ??CrossCallReturnLabel_31:
   \   0000B9                ; Setup parameters for call to function osal_memcpy
   \   0000B9   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   0000BC   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   0000BF   F5..         MOV     ?V0 + 2,A
   \   0000C1   78..         MOV     R0,#?V0 + 0
   \   0000C3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000C6   7C07         MOV     R4,#0x7
   \   0000C8   7D00         MOV     R5,#0x0
   \   0000CA   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   0000CC   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   0000CE   12....       LCALL   ??osal_memcpy?relay
   \   0000D1   7403         MOV     A,#0x3
   \   0000D3   12....       LCALL   ?DEALLOC_XSTACK8
    253            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   0000D6                ; Setup parameters for call to function aps_AddGroup
   \   0000D6   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   0000D8   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   0000DA   7914         MOV     R1,#0x14
   \   0000DC   12....       LCALL   ??aps_AddGroup?relay
    254            
    255          
    256            // Device hardware initialization can be added here or in main() (Zmain.c).
    257            // If the hardware is application specific - add it here.
    258            // If the hardware is other parts of the device add it in main().
    259          
    260           #if defined ( BUILD_ALL_DEVICES )
    261            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    262            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    263            // together - if they are - we will start up a coordinator. Otherwise,
    264            // the device will start as a router.
    265            if ( readCoordinatorJumper() )
   \   0000DF                ; Setup parameters for call to function readCoordinatorJumper
   \   0000DF   12....       LCALL   ??readCoordinatorJumper?relay
   \   0000E2   E9           MOV     A,R1
   \   0000E3   90....       MOV     DPTR,#zgDeviceLogicalType
   \   0000E6   6003         JZ      ??SampleApp_Init_0
    266              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
   \   0000E8   E4           CLR     A
   \   0000E9   8002         SJMP    ??SampleApp_Init_1
    267            else
    268              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
   \                     ??SampleApp_Init_0:
   \   0000EB   7401         MOV     A,#0x1
   \                     ??SampleApp_Init_1:
   \   0000ED   F0           MOVX    @DPTR,A
    269          #endif // BUILD_ALL_DEVICES
    270          
    271          #if defined ( HOLD_AUTO_START )
    272            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    273            //  from starting the device and wait for the application to
    274            //  start the device.
    275            ZDOInitDevice(0);
   \   0000EE                ; Setup parameters for call to function ZDOInitDevice
   \   0000EE   7A00         MOV     R2,#0x0
   \   0000F0   7B00         MOV     R3,#0x0
   \   0000F2   12....       LCALL   ??ZDOInitDevice?relay
    276          #endif
    277          
    278          #if defined ( LCD_SUPPORTED )
    279            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
   \   0000F5                ; Setup parameters for call to function HalLcdWriteString
   \   0000F5   7901         MOV     R1,#0x1
   \   0000F7   7A..         MOV     R2,#`?<Constant "SampleApp">` & 0xff
   \   0000F9   7B..         MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
   \   0000FB   12....       LCALL   ??HalLcdWriteString?relay
    280          #endif
    281          }
   \   0000FE   741D         MOV     A,#0x1d
   \   000100   12....       LCALL   ?DEALLOC_XSTACK8
   \   000103                REQUIRE ?Subroutine0
   \   000103                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F03         MOV     R7,#0x3
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   90....       MOV     DPTR,#Broadcast_DstAddr + 8
   \   000003   740F         MOV     A,#0xf
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   7414         MOV     A,#0x14
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   90....       MOV     DPTR,#Broadcast_DstAddr
   \   00000D   74FF         MOV     A,#-0x1
   \   00000F   F0           MOVX    @DPTR,A
   \   000010   A3           INC     DPTR
   \   000011   F0           MOVX    @DPTR,A
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine9_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   E4           CLR     A
   \   000003   F0           MOVX    @DPTR,A
   \   000004   22           RET
    282          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    283          static void FS_Uart_CallBack(uint8 port,uint8 event)   //串口回调函数
   \                     FS_Uart_CallBack:
    284          {   
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
   \   000007   EA           MOV     A,R2
   \   000008   FF           MOV     R7,A
    285             if(( event & ( HAL_UART_RX_FULL | HAL_UART_RX_ABOUT_FULL | HAL_UART_RX_TIMEOUT ) ) ) 
   \   000009   7407         MOV     A,#0x7
   \   00000B   5F           ANL     A,R7
   \   00000C   6017         JZ      ??FS_Uart_CallBack_0
    286              { 
    287                if(port == HAL_UART_PORT_1)
   \   00000E   7401         MOV     A,#0x1
   \   000010   6E           XRL     A,R6
   \   000011   7012         JNZ     ??FS_Uart_CallBack_0
    288                {
    289                    uint16 len = Hal_UART_RxBufLen(HAL_UART_PORT_1); //取出本次接收到的字符长度              
    290                    HalUARTRead(HAL_UART_PORT_1, HttpUart_RX, len); 
                                                        ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "unsigned char *"
   \   000013                ; Setup parameters for call to function HalUARTRead
   \   000013                ; Setup parameters for call to function Hal_UART_RxBufLen
   \   000013   7901         MOV     R1,#0x1
   \   000015   12....       LCALL   ??Hal_UART_RxBufLen?relay
   \   000018   EA           MOV     A,R2
   \   000019   FC           MOV     R4,A
   \   00001A   EB           MOV     A,R3
   \   00001B   FD           MOV     R5,A
   \   00001C   7A..         MOV     R2,#HttpUart_RX & 0xff
   \   00001E   7B..         MOV     R3,#(HttpUart_RX >> 8) & 0xff
   \   000020   7901         MOV     R1,#0x1
   \   000022   12....       LCALL   ??HalUARTRead?relay
    291                    #if defined(ZDO_COORDINATOR)   //判断是否为协调器
    292                    
    293                    #else                
    294                          len_buff_rx=len;   //长度                               
    295                          memcpy(zigbee_buff_rx,HttpUart_RX,len);      //复制  
    296                          zigbee_send();       //发送数据           
    297                          sprintf((char*)&zigbee_id_tx[0],"ID:%x\r\n",EndDeviceID);    //EndDeviceID = 0x3001; //终端ID
    298                          HalUARTWrite(HAL_UART_PORT_1, zigbee_id_tx, strlen(zigbee_id_tx));                         
    299                    #endif        
    300                }
    301              }
    302          }
   \                     ??FS_Uart_CallBack_0:
   \   000025   7F01         MOV     R7,#0x1
   \   000027   02....       LJMP    ?BANKED_LEAVE_XDATA
    303          
    304          /*********************************************************************
    305           * @fn      SampleApp_ProcessEvent
    306           *
    307           * @brief   Generic Application Task event processor.  This function
    308           *          is called to process all events for the task.  Events
    309           *          include timers, messages and any other user defined events.
    310           *
    311           * @param   task_id  - The OSAL assigned task ID.
    312           * @param   events - events to process.  This is a bit map and can
    313           *                   contain more than one event.
    314           *
    315           * @return  none
    316           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    317          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    318          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    319            afIncomingMSGPacket_t *MSGpkt;
    320            (void)task_id;  // Intentionally unreferenced parameter
    321          
    322            if ( events & SYS_EVENT_MSG )
   \   000009   5480         ANL     A,#0x80
   \   00000B   607C         JZ      ??SampleApp_ProcessEvent_0
    323            {
    324              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00000D                ; Setup parameters for call to function osal_msg_receive
   \   00000D   802E         SJMP    ??SampleApp_ProcessEvent_1
    325              while ( MSGpkt )
    326              {
    327                switch ( MSGpkt->hdr.event )
    328                {
    329                  // Received when a key is pressed
    330                  case KEY_CHANGE:
    331                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    332                    break;
    333          
    334                  // Received when a messages is received (OTA) for this endpoint
    335                  case AF_INCOMING_MSG_CMD:
    336                    SampleApp_MessageMSGCB( MSGpkt );
    337                    break;
    338          
    339                  // Received whenever the device changes state in the network
    340                  case ZDO_STATE_CHANGE:
    341                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   90....       MOV     DPTR,#SampleApp_NwkState
   \   000014   F0           MOVX    @DPTR,A
    342                    if ( (SampleApp_NwkState == DEV_ZB_COORD)
    343                        || (SampleApp_NwkState == DEV_ROUTER)
    344                        || (SampleApp_NwkState == DEV_END_DEVICE) )
   \   000015   6409         XRL     A,#0x9
   \   000017   600A         JZ      ??SampleApp_ProcessEvent_3
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   6407         XRL     A,#0x7
   \   00001C   6005         JZ      ??SampleApp_ProcessEvent_3
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   6406         XRL     A,#0x6
   \   000021   7013         JNZ     ??CrossCallReturnLabel_13
    345                    {
    346                      
    347                      
    348                       #if defined(ZDO_COORDINATOR) //协调器通过串口输出自身短地址、IEEE  
    349                            Broadcast_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \                     ??SampleApp_ProcessEvent_3:
   \   000023   12....       LCALL   ?Subroutine3 & 0xFFFF
    350                            Broadcast_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
    351                            Broadcast_DstAddr.addr.shortAddr = 0xFFFF;
    352                            #if UART_DEBUG           
    353                                PrintAddrInfo( NLME_GetShortAddr(), aExtendedAddress + Z_EXTADDR_LEN - 1);
    354                            #endif 
    355                            HalUARTWrite(HAL_UART_PORT_0,"UartIniCOOOK33\n", sizeof("UartIniCOOOK33\n"));
   \                     ??CrossCallReturnLabel_7:
   \   000026                ; Setup parameters for call to function HalUARTWrite
   \   000026   7C10         MOV     R4,#0x10
   \   000028   7D00         MOV     R5,#0x0
   \   00002A   7A..         MOV     R2,#`?<Constant "UartIniCOOOK33\\n">` & 0xff
   \   00002C   7B..         MOV     R3,#(`?<Constant "UartIniCOOOK33\\n">` >> 8) & 0xff
   \   00002E   7900         MOV     R1,#0x0
   \   000030   12....       LCALL   ??HalUARTWrite?relay
    356                          
    357                            osal_start_timerEx( SampleApp_TaskID, COOR_GW_PERIODIC_MSG_EVT,
    358                            ( COOR_GW_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );				
   \   000033                ; Setup parameters for call to function osal_rand
   \   000033   12....       LCALL   ?Subroutine6 & 0xFFFF
    359                        #else  
    360                            
    361                            AfSendAddrInfo();
    362                            //联网成功启动周期性上报事件
    363                            osal_start_timerEx( SampleApp_TaskID, END_RF_PERIODIC_MSG_EVT,
    364                                ( END_RF_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
    365                        #endif
    366                    }
    367                    else
    368                    {
    369                      // Device is no longer in the network
    370                    }
    371                    break;
    372          
    373                  default:
    374                    break;
    375                }
    376          
    377                // Release the memory
    378                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??CrossCallReturnLabel_13:
   \   000036                ; Setup parameters for call to function osal_msg_deallocate
   \   000036   AA..         MOV     R2,?V0 + 0
   \   000038   AB..         MOV     R3,?V0 + 1
   \   00003A   12....       LCALL   ??osal_msg_deallocate?relay
    379          
    380                // Next - if one is available
    381                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00003D                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   00003D   90....       MOV     DPTR,#SampleApp_TaskID
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 0,R2
   \   000047   8B..         MOV     ?V0 + 1,R3
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   6032         JZ      ??SampleApp_ProcessEvent_4
   \   00004F   85..82       MOV     DPL,?V0 + 0
   \   000052   85..83       MOV     DPH,?V0 + 1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   24E6         ADD     A,#-0x1a
   \   000058   601E         JZ      ??SampleApp_ProcessEvent_5
   \   00005A   245A         ADD     A,#0x5a
   \   00005C   6006         JZ      ??SampleApp_ProcessEvent_6
   \   00005E   24EF         ADD     A,#-0x11
   \   000060   60AD         JZ      ??SampleApp_ProcessEvent_2
   \   000062   80D2         SJMP    ??CrossCallReturnLabel_13
   \                     ??SampleApp_ProcessEvent_6:
   \   000064                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000064   A3           INC     DPTR
   \   000065   A3           INC     DPTR
   \   000066   A3           INC     DPTR
   \   000067   E0           MOVX    A,@DPTR
   \   000068   FA           MOV     R2,A
   \   000069   85..82       MOV     DPL,?V0 + 0
   \   00006C   85..83       MOV     DPH,?V0 + 1
   \   00006F   A3           INC     DPTR
   \   000070   A3           INC     DPTR
   \   000071   E0           MOVX    A,@DPTR
   \   000072   F9           MOV     R1,A
   \   000073   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   000076   80BE         SJMP    ??CrossCallReturnLabel_13
   \                     ??SampleApp_ProcessEvent_5:
   \   000078                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000078   AA..         MOV     R2,?V0 + 0
   \   00007A   AB..         MOV     R3,?V0 + 1
   \   00007C   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   00007F   80B5         SJMP    ??CrossCallReturnLabel_13
    382              }
    383          
    384              // return unprocessed events
    385              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_4:
   \   000081   EE           MOV     A,R6
   \   000082   FA           MOV     R2,A
   \   000083   EF           MOV     A,R7
   \   000084   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_7:
   \   000086   FB           MOV     R3,A
   \   000087   8016         SJMP    ??SampleApp_ProcessEvent_8
    386            }
    387            
    388            #if defined(ZDO_COORDINATOR)
    389            if ( events & COOR_GW_PERIODIC_MSG_EVT )
   \                     ??SampleApp_ProcessEvent_0:
   \   000089   EE           MOV     A,R6
   \   00008A   A2E0         MOV     C,0xE0 /* A   */.0
   \   00008C   500D         JNC     ??SampleApp_ProcessEvent_9
    390            {
    391                COOR_GW_PeriodicMessage();
   \   00008E                ; Setup parameters for call to function COOR_GW_PeriodicMessage
   \   00008E   12....       LCALL   ??COOR_GW_PeriodicMessage?relay
    392              // 发送定时函数，网关定时更新终端数据到服务器
    393              osal_start_timerEx( SampleApp_TaskID, COOR_GW_PERIODIC_MSG_EVT,
    394                  ( COOR_GW_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   000091                ; Setup parameters for call to function osal_rand
   \   000091   12....       LCALL   ?Subroutine6 & 0xFFFF
    395          
    396              return (events ^ COOR_GW_PERIODIC_MSG_EVT);
   \                     ??CrossCallReturnLabel_14:
   \   000094   EE           MOV     A,R6
   \   000095   6401         XRL     A,#0x1
   \   000097   FA           MOV     R2,A
   \   000098   EF           MOV     A,R7
   \   000099   80EB         SJMP    ??SampleApp_ProcessEvent_7
    397            }
    398            
    399            #else
    400          
    401            
    402            // END_RF_PERIODIC_MSG_EVT是终端响应事件
    403            if ( events & END_RF_PERIODIC_MSG_EVT )
    404            {
    405              // 终端定时函数，定时向协调器发送数据
    406              END_SendPeriodicMessage();
    407              // osal_start_timerEx是协议栈的定时函数，定时时间是END_RF_PERIODIC_MSG_TIMEOUT
    408              // 可通过在参数上面右键Go to definition of END_RF_PERIODIC_MSG_TIMEOUT 修改
    409              osal_start_timerEx( SampleApp_TaskID, END_RF_PERIODIC_MSG_EVT,
    410                  ( END_RF_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
    411          
    412              return (events ^ END_RF_PERIODIC_MSG_EVT);
    413            }
    414            #endif
    415            
    416            // Discard unknown events
    417            return 0;
   \                     ??SampleApp_ProcessEvent_9:
   \   00009B   7A00         MOV     R2,#0x0
   \   00009D   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_8:
   \   00009F   7F04         MOV     R7,#0x4
   \   0000A1   02....       LJMP    ?BANKED_LEAVE_XDATA
    418          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ??osal_rand?relay
   \   000003                ; Setup parameters for call to function osal_start_timerEx
   \   000003                ; Setup parameters for call to function osal_start_timerEx
   \   000003   EA           MOV     A,R2
   \   000004   2488         ADD     A,#-0x78
   \   000006   FC           MOV     R4,A
   \   000007   E4           CLR     A
   \   000008   3413         ADDC    A,#0x13
   \   00000A   FD           MOV     R5,A
   \   00000B   7A01         MOV     R2,#0x1
   \   00000D   7B00         MOV     R3,#0x0
   \   00000F   90....       MOV     DPTR,#SampleApp_TaskID
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F9           MOV     R1,A
   \   000014   12....       LCALL   ??osal_start_timerEx?relay
   \   000017   22           RET
    419          
    420          void AfSendAddrInfo(void)
    421          {
    422              uint16 shortAddr;
    423              uint8 strBuf[11]={0};  
    424              
    425              SampleApp_TxAddr.addrMode = (afAddrMode_t)Addr16Bit;
    426              SampleApp_TxAddr.endPoint = SAMPLEAPP_ENDPOINT;
    427              SampleApp_TxAddr.addr.shortAddr = 0x00;   
    428              
    429              shortAddr=NLME_GetShortAddr();
    430              
    431              strBuf[0] = 0x3B;                          //发送地址给协调器 可用于点播
    432              strBuf[1] = HI_UINT16( shortAddr );        //存放短地址高8位
    433              strBuf[2] = LO_UINT16( shortAddr );        //存放短地址低8位
    434              
    435              osal_memcpy(&strBuf[3], NLME_GetExtAddr(), 8);
    436                  
    437             if ( AF_DataRequest( &SampleApp_TxAddr, (endPointDesc_t *)&SampleApp_epDesc,
    438                                 END_RF_PERIODIC_CLUSTERID,
    439                                 11,
    440                                 strBuf,
    441                                 &SampleApp_TransID, 
    442                                 0, 
    443                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
    444               
    445            {
    446            }
    447            else
    448            {
    449              // Error occurred in request to send.
    450            }   
    451          }
    452          
    453          /*********************************************************************
    454           * Event Generation Functions
    455           */
    456          /*********************************************************************
    457           * @fn      SampleApp_HandleKeys
    458           *
    459           * @brief   Handles all key events for this device.
    460           *
    461           * @param   shift - true if in shift/alt.
    462           * @param   keys - bit field for key events. Valid entries:
    463           *                 HAL_KEY_SW_2
    464           *                 HAL_KEY_SW_1
    465           *
    466           * @return  none
    467           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    468          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    469          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
    470            (void)shift;  // Intentionally unreferenced parameter
    471            
    472            if ( keys & HAL_KEY_SW_1 )
    473            {
    474              
    475            }
    476          
    477            if ( keys & HAL_KEY_SW_2 )
   \   000006   A2E1         MOV     C,0xE0 /* A   */.1
   \   000008   5024         JNC     ??SampleApp_HandleKeys_0
    478            {
    479              /* The Flashr Command is sent to Group 1.
    480               * This key toggles this device in and out of group 1.
    481               * If this device doesn't belong to group 1, this application
    482               * will not receive the Flash command sent to group 1.
    483               */
    484              aps_Group_t *grp;
    485              grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    486              if ( grp )
   \   00000A                ; Setup parameters for call to function aps_FindGroup
   \   00000A   7A01         MOV     R2,#0x1
   \   00000C   7B00         MOV     R3,#0x0
   \   00000E   7914         MOV     R1,#0x14
   \   000010   12....       LCALL   ??aps_FindGroup?relay
   \   000013   8B..         MOV     ?V0 + 1,R3
   \   000015   EA           MOV     A,R2
   \   000016   45..         ORL     A,?V0 + 1
   \   000018   600B         JZ      ??SampleApp_HandleKeys_1
    487              {
    488                // Remove from the group
    489                aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
   \   00001A                ; Setup parameters for call to function aps_RemoveGroup
   \   00001A   7A01         MOV     R2,#0x1
   \   00001C   7B00         MOV     R3,#0x0
   \   00001E   7914         MOV     R1,#0x14
   \   000020   12....       LCALL   ??aps_RemoveGroup?relay
   \   000023   8009         SJMP    ??SampleApp_HandleKeys_0
    490              }
    491              else
    492              {
    493                // Add to the flash group
    494                aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \                     ??SampleApp_HandleKeys_1:
   \   000025                ; Setup parameters for call to function aps_AddGroup
   \   000025   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000027   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   000029   7914         MOV     R1,#0x14
   \   00002B   12....       LCALL   ??aps_AddGroup?relay
    495              }
    496            }
    497          }
   \                     ??SampleApp_HandleKeys_0:
   \   00002E   7F02         MOV     R7,#0x2
   \   000030   02....       LJMP    ?BANKED_LEAVE_XDATA
    498          
    499          /*********************************************************************
    500           * @fn      SampleApp_MessageMSGCB
    501           *
    502           * @brief   Data message processor callback.  This function processes
    503           *          any incoming data - probably from other devices.  So, based
    504           *          on cluster ID, perform the intended action.
    505           *
    506           * @param   none
    507           *
    508           * @return  none
    509           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    510          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    511          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 400
   \   000005   758270       MOV     DPL,#0x70
   \   000008   7583FE       MOV     DPH,#-0x2
   \   00000B   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   00000E   EA           MOV     A,R2
   \   00000F   F8           MOV     R0,A
   \   000010   EB           MOV     A,R3
   \   000011   F9           MOV     R1,A
    512              uint16 shortAddr;
                            ^
Warning[Pe177]: variable "shortAddr" was declared but never referenced
    513              uint8 *pIeeeAddr; 
                            ^
Warning[Pe177]: variable "pIeeeAddr" was declared but never referenced
    514              uint8 delay;
                           ^
Warning[Pe177]: variable "delay" was declared but never referenced

  static uint16 EndDeviceID = 0x3001; //终端ID，非常重要
                ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",48  Warning[Pe177]: 
          variable "EndDeviceID" was declared but never referenced

  static afAddrType_t Broadcast_DstAddr;
                      ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",115  Warning[Pe550]: 
          variable "Broadcast_DstAddr" was set but never used

  static void SerialApp_ProcessMSGCmd( afIncomingMSGPacket_t *pkt );
              ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",153  Warning[Pe177]: 
          function "SerialApp_ProcessMSGCmd" was declared but never referenced
    515              uint8 afRxData[data_size]={0};
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   AC82         MOV     R4,DPL
   \   000017   AD83         MOV     R5,DPH
   \   000019   7583..       MOV     DPH,#(`?<Constant {0}>` >> 8) & 0xff
   \   00001C   7582..       MOV     DPL,#`?<Constant {0}>` & 0xff
   \   00001F   7490         MOV     A,#-0x70
   \   000021   7B02         MOV     R3,#0x2
   \   000023   12....       LCALL   ?MOVE_LONG16_XDATA_XDATA
    516              uint8 afDataLen=0; 	
    517              
    518              osal_memcpy(afRxData, pkt->cmd.Data, pkt->cmd.DataLength);
   \   000026   E8           MOV     A,R0
   \   000027   2420         ADD     A,#0x20
   \   000029   FA           MOV     R2,A
   \   00002A   E9           MOV     A,R1
   \   00002B   3400         ADDC    A,#0x0
   \   00002D   FB           MOV     R3,A
   \   00002E   EA           MOV     A,R2
   \   00002F   FE           MOV     R6,A
   \   000030   EB           MOV     A,R3
   \   000031   FF           MOV     R7,A
   \   000032                ; Setup parameters for call to function osal_memcpy
   \   000032   E8           MOV     A,R0
   \   000033   2422         ADD     A,#0x22
   \   000035   F582         MOV     DPL,A
   \   000037   E9           MOV     A,R1
   \   000038   3400         ADDC    A,#0x0
   \   00003A   F583         MOV     DPH,A
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   F5..         MOV     ?V0 + 0,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F5..         MOV     ?V0 + 1,A
   \   000043   75..00       MOV     ?V0 + 2,#0x0
   \   000046   78..         MOV     R0,#?V0 + 0
   \   000048   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00004B   8E82         MOV     DPL,R6
   \   00004D   8F83         MOV     DPH,R7
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   FC           MOV     R4,A
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   FD           MOV     R5,A
   \   000054   7403         MOV     A,#0x3
   \   000056   12....       LCALL   ?XSTACK_DISP0_8
   \   000059   AA82         MOV     R2,DPL
   \   00005B   AB83         MOV     R3,DPH
   \   00005D   12....       LCALL   ??osal_memcpy?relay
   \   000060   7403         MOV     A,#0x3
   \   000062   12....       LCALL   ?DEALLOC_XSTACK8
    519              afDataLen=pkt->cmd.DataLength;
    520              
    521          //    if(afDataLen>=8 && afRxData[0]=='$' && afRxData[1]=='@')
    522          //    {
    523          //        //HalUARTWrite(UART0, afRxData, afDataLen);
    524          //        //parseRfData(afRxData, afDataLen);
    525          //    }
    526          
    527                HalUARTWrite(HAL_UART_PORT_1, afRxData,afDataLen );   //串口发送   
   \   000065                ; Setup parameters for call to function HalUARTWrite
   \   000065   8E82         MOV     DPL,R6
   \   000067   8F83         MOV     DPH,R7
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   FC           MOV     R4,A
   \   00006B   7D00         MOV     R5,#0x0
   \   00006D   85..82       MOV     DPL,?XSP + 0
   \   000070   85..83       MOV     DPH,?XSP + 1
   \   000073   AA82         MOV     R2,DPL
   \   000075   AB83         MOV     R3,DPH
   \   000077   7901         MOV     R1,#0x1
   \   000079   12....       LCALL   ??HalUARTWrite?relay
    528            
    529          }
   \   00007C   758290       MOV     DPL,#-0x70
   \   00007F   758301       MOV     DPH,#0x1
   \   000082   12....       LCALL   ?ADD_XSTACK_DISP0_16
   \   000085   02....       LJMP    ?Subroutine0 & 0xFFFF
    530          
    531          //网关定时函数，定时更新数据到服务器

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    532          void COOR_GW_PeriodicMessage( void )
   \                     COOR_GW_PeriodicMessage:
    533          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    534              //判断终端1是否在线，0x30表示在线，0x31表示离线，下面其他终端判断同理
    535              sensorData[ 0 ] = 0x30;
   \   000004   90....       MOV     DPTR,#sensorData
   \   000007   7430         MOV     A,#0x30
   \   000009   F0           MOVX    @DPTR,A
    536              if ( end1Online && end1Time < 4 ){
   \   00000A   90....       MOV     DPTR,#end1Online
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   600B         JZ      ??COOR_GW_PeriodicMessage_0
   \   000010   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000013   5006         JNC     ??COOR_GW_PeriodicMessage_0
    537                  sensorData[ 0 ] = 0x31;
   \   000015   90....       MOV     DPTR,#sensorData
   \   000018   7431         MOV     A,#0x31
   \   00001A   F0           MOVX    @DPTR,A
    538              }
    539              end1Time = end1Time + 1;
   \                     ??COOR_GW_PeriodicMessage_0:
   \   00001B   90....       MOV     DPTR,#end1Time
   \   00001E   12....       LCALL   ?Subroutine1 & 0xFFFF
    540              if ( end1Time >= 4 ){
   \                     ??CrossCallReturnLabel_0:
   \   000021   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   000024   4005         JC      ??COOR_GW_PeriodicMessage_1
    541                  end1Online = false;
   \   000026   90....       MOV     DPTR,#end1Online
   \   000029   E4           CLR     A
   \   00002A   F0           MOVX    @DPTR,A
    542              }
    543              end1Time = end1Time > 100 ? 4 : end1Time;
   \                     ??COOR_GW_PeriodicMessage_1:
   \   00002B   90....       MOV     DPTR,#end1Time
   \   00002E   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000031   4006         JC      ??CrossCallReturnLabel_33
   \   000033   90....       MOV     DPTR,#end1Time
   \   000036   12....       LCALL   ?Subroutine2 & 0xFFFF
    544              
    545              sensorData[ 8 ] = 0x30;
   \                     ??CrossCallReturnLabel_33:
   \   000039   90....       MOV     DPTR,#sensorData + 8
   \   00003C   7430         MOV     A,#0x30
   \   00003E   F0           MOVX    @DPTR,A
    546              if ( end2Online && end2Time < 4 ){
   \   00003F   90....       MOV     DPTR,#end2Online
   \   000042   E0           MOVX    A,@DPTR
   \   000043   600E         JZ      ??COOR_GW_PeriodicMessage_2
   \   000045   90....       MOV     DPTR,#end2Time
   \   000048   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00004B   5006         JNC     ??COOR_GW_PeriodicMessage_2
    547                  sensorData[ 8 ] = 0x31;
   \   00004D   90....       MOV     DPTR,#sensorData + 8
   \   000050   7431         MOV     A,#0x31
   \   000052   F0           MOVX    @DPTR,A
    548              }
    549              end2Time = end2Time + 1;
   \                     ??COOR_GW_PeriodicMessage_2:
   \   000053   90....       MOV     DPTR,#end2Time
   \   000056   12....       LCALL   ?Subroutine1 & 0xFFFF
    550              if ( end2Time >= 4 ){
   \                     ??CrossCallReturnLabel_1:
   \   000059   90....       MOV     DPTR,#end2Time
   \   00005C   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   00005F   4005         JC      ??COOR_GW_PeriodicMessage_3
    551                  end2Online = false;
   \   000061   90....       MOV     DPTR,#end2Online
   \   000064   E4           CLR     A
   \   000065   F0           MOVX    @DPTR,A
    552              }
    553              end2Time = end2Time > 100 ? 4 : end2Time;
   \                     ??COOR_GW_PeriodicMessage_3:
   \   000066   90....       MOV     DPTR,#end2Time
   \   000069   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   00006C   4006         JC      ??CrossCallReturnLabel_34
   \   00006E   90....       MOV     DPTR,#end2Time
   \   000071   12....       LCALL   ?Subroutine2 & 0xFFFF
    554              
    555              sensorData[ 16 ] = 0x30;
   \                     ??CrossCallReturnLabel_34:
   \   000074   90....       MOV     DPTR,#sensorData + 16
   \   000077   7430         MOV     A,#0x30
   \   000079   F0           MOVX    @DPTR,A
    556              if ( end3Online && end3Time < 4 ){
   \   00007A   90....       MOV     DPTR,#end3Online
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   600E         JZ      ??COOR_GW_PeriodicMessage_4
   \   000080   90....       MOV     DPTR,#end3Time
   \   000083   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000086   5006         JNC     ??COOR_GW_PeriodicMessage_4
    557                  sensorData[ 16 ] = 0x31;
   \   000088   90....       MOV     DPTR,#sensorData + 16
   \   00008B   7431         MOV     A,#0x31
   \   00008D   F0           MOVX    @DPTR,A
    558              }
    559              end3Time = end3Time + 1;
   \                     ??COOR_GW_PeriodicMessage_4:
   \   00008E   90....       MOV     DPTR,#end3Time
   \   000091   12....       LCALL   ?Subroutine1 & 0xFFFF
    560              if ( end3Time >= 4 ){
   \                     ??CrossCallReturnLabel_2:
   \   000094   90....       MOV     DPTR,#end3Time
   \   000097   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   00009A   4005         JC      ??COOR_GW_PeriodicMessage_5
    561                  end3Online = false;
   \   00009C   90....       MOV     DPTR,#end3Online
   \   00009F   E4           CLR     A
   \   0000A0   F0           MOVX    @DPTR,A
    562              }
    563              end3Time = end3Time > 100 ? 4 : end3Time;
   \                     ??COOR_GW_PeriodicMessage_5:
   \   0000A1   90....       MOV     DPTR,#end3Time
   \   0000A4   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   0000A7   4006         JC      ??CrossCallReturnLabel_35
   \   0000A9   90....       MOV     DPTR,#end3Time
   \   0000AC   12....       LCALL   ?Subroutine2 & 0xFFFF
    564              
    565              sensorData[ 24 ] = 0x30;
   \                     ??CrossCallReturnLabel_35:
   \   0000AF   90....       MOV     DPTR,#sensorData + 24
   \   0000B2   7430         MOV     A,#0x30
   \   0000B4   F0           MOVX    @DPTR,A
    566              if ( end4Online && end4Time < 4 ){
   \   0000B5   90....       MOV     DPTR,#end4Online
   \   0000B8   E0           MOVX    A,@DPTR
   \   0000B9   600E         JZ      ??COOR_GW_PeriodicMessage_6
   \   0000BB   90....       MOV     DPTR,#end4Time
   \   0000BE   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   0000C1   5006         JNC     ??COOR_GW_PeriodicMessage_6
    567                  sensorData[ 24 ] = 0x31;
   \   0000C3   90....       MOV     DPTR,#sensorData + 24
   \   0000C6   7431         MOV     A,#0x31
   \   0000C8   F0           MOVX    @DPTR,A
    568              }
    569              end4Time = end4Time + 1;
   \                     ??COOR_GW_PeriodicMessage_6:
   \   0000C9   90....       MOV     DPTR,#end4Time
   \   0000CC   12....       LCALL   ?Subroutine1 & 0xFFFF
    570              if ( end4Time >= 4 ){
   \                     ??CrossCallReturnLabel_3:
   \   0000CF   90....       MOV     DPTR,#end4Time
   \   0000D2   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   0000D5   4005         JC      ??COOR_GW_PeriodicMessage_7
    571                  end4Online = false;
   \   0000D7   90....       MOV     DPTR,#end4Online
   \   0000DA   E4           CLR     A
   \   0000DB   F0           MOVX    @DPTR,A
    572              }
    573              end4Time = end4Time > 100 ? 4 : end4Time;
   \                     ??COOR_GW_PeriodicMessage_7:
   \   0000DC   90....       MOV     DPTR,#end4Time
   \   0000DF   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   0000E2   4006         JC      ??CrossCallReturnLabel_36
   \   0000E4   90....       MOV     DPTR,#end4Time
   \   0000E7   12....       LCALL   ?Subroutine2 & 0xFFFF
    574              
    575              sensorData[ 32 ] = 0x30;
   \                     ??CrossCallReturnLabel_36:
   \   0000EA   90....       MOV     DPTR,#sensorData + 32
   \   0000ED   7430         MOV     A,#0x30
   \   0000EF   F0           MOVX    @DPTR,A
    576              if ( end5Online && end5Time < 4 ){
   \   0000F0   90....       MOV     DPTR,#end5Online
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   600E         JZ      ??COOR_GW_PeriodicMessage_8
   \   0000F6   90....       MOV     DPTR,#end5Time
   \   0000F9   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   0000FC   5006         JNC     ??COOR_GW_PeriodicMessage_8
    577                  sensorData[ 32 ] = 0x31;
   \   0000FE   90....       MOV     DPTR,#sensorData + 32
   \   000101   7431         MOV     A,#0x31
   \   000103   F0           MOVX    @DPTR,A
    578              }
    579              end5Time = end5Time + 1;
   \                     ??COOR_GW_PeriodicMessage_8:
   \   000104   90....       MOV     DPTR,#end5Time
   \   000107   12....       LCALL   ?Subroutine1 & 0xFFFF
    580              if ( end5Time >= 4 ){
   \                     ??CrossCallReturnLabel_4:
   \   00010A   90....       MOV     DPTR,#end5Time
   \   00010D   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000110   4005         JC      ??COOR_GW_PeriodicMessage_9
    581                  end5Online = false;
   \   000112   90....       MOV     DPTR,#end5Online
   \   000115   E4           CLR     A
   \   000116   F0           MOVX    @DPTR,A
    582              }
    583              end5Time = end5Time > 100 ? 4 : end5Time;
   \                     ??COOR_GW_PeriodicMessage_9:
   \   000117   90....       MOV     DPTR,#end5Time
   \   00011A   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00011D   4006         JC      ??CrossCallReturnLabel_37
   \   00011F   90....       MOV     DPTR,#end5Time
   \   000122   12....       LCALL   ?Subroutine2 & 0xFFFF
    584              
    585             
    586              httpt += 1;
   \                     ??CrossCallReturnLabel_37:
   \   000125   90....       MOV     DPTR,#httpt
   \   000128   12....       LCALL   ?Subroutine1 & 0xFFFF
    587              if ( httpt == 5 )
   \                     ??CrossCallReturnLabel_5:
   \   00012B   90....       MOV     DPTR,#httpt
   \   00012E   E0           MOVX    A,@DPTR
   \   00012F   6405         XRL     A,#0x5
   \   000131   7002         JNZ     ??COOR_GW_PeriodicMessage_10
   \   000133   A3           INC     DPTR
   \   000134   E0           MOVX    A,@DPTR
   \                     ??COOR_GW_PeriodicMessage_10:
   \   000135   7008         JNZ     ??CrossCallReturnLabel_32
    588              {
    589                  httpt = 1;
   \   000137   90....       MOV     DPTR,#httpt
   \   00013A   7401         MOV     A,#0x1
   \   00013C   12....       LCALL   ??Subroutine9_0 & 0xFFFF
    590              }
    591              
    592              if ( httpSendOK == 1 )
    593              {
    594          //        HalUARTWrite(HAL_UART_PORT_0, Http_TX, strlen( Http_TX ));
    595          //        HalUARTWrite(HAL_UART_PORT_1, Http_TX, strlen( Http_TX ));
    596              }
    597          }
   \                     ??CrossCallReturnLabel_32:
   \   00013F   D083         POP     DPH
   \   000141   D082         POP     DPL
   \   000143   02....       LJMP    ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   C3           CLR     C
   \   000001   E0           MOVX    A,@DPTR
   \   000002   9465         SUBB    A,#0x65
   \   000004   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   90....       MOV     DPTR,#end1Time
   \   000003                REQUIRE ??Subroutine8_0
   \   000003                ; // Fall through to label ??Subroutine8_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine8_0:
   \   000000   C3           CLR     C
   \   000001   E0           MOVX    A,@DPTR
   \   000002   9404         SUBB    A,#0x4
   \   000004   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   9400         SUBB    A,#0x0
   \   000004   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000006   65D0         XRL     A,PSW
   \   000008   33           RLC     A
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7404         MOV     A,#0x4
   \   000002                REQUIRE ??Subroutine9_0
   \   000002                ; // Fall through to label ??Subroutine9_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   2401         ADD     A,#0x1
   \   000003   F0           MOVX    @DPTR,A
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   3400         ADDC    A,#0x0
   \   000008   F0           MOVX    @DPTR,A
   \   000009   22           RET

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for SendBuf>`:
   \   000000   24           DB 36
   \   000001   40           DB 64
   \   000002   30           DB 48
   \   000003   01           DB 1
   \   000004   02           DB 2
   \   000005   31           DB 49
   \   000006   0D           DB 13
   \   000007   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for did>`:
   \   000000   ....         DW `?<Constant "10001">`

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for key>`:
   \   000000   ....         DW `?<Constant "aaaaaa">`

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for httpt>`:
   \   000000   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for sensorData>`:
   \   000000   30           DB 48
   \   000001   30           DB 48
   \   000002   30           DB 48
   \   000003   30           DB 48
   \   000004   30           DB 48
   \   000005   30           DB 48
   \   000006   30           DB 48
   \   000007   30           DB 48
   \   000008   30           DB 48
   \   000009   30           DB 48
   \   00000A   30           DB 48
   \   00000B   30           DB 48
   \   00000C   30           DB 48
   \   00000D   30           DB 48
   \   00000E   30           DB 48
   \   00000F   30           DB 48
   \   000010   30           DB 48
   \   000011   30           DB 48
   \   000012   30           DB 48
   \   000013   30           DB 48
   \   000014   30           DB 48
   \   000015   30           DB 48
   \   000016   30           DB 48
   \   000017   30           DB 48
   \   000018   30           DB 48
   \   000019   30           DB 48
   \   00001A   30           DB 48
   \   00001B   30           DB 48
   \   00001C   30           DB 48
   \   00001D   30           DB 48
   \   00001E   30           DB 48
   \   00001F   30           DB 48
   \   000020   30           DB 48
   \   000021   30           DB 48
   \   000022   30           DB 48
   \   000023   30           DB 48
   \   000024   30           DB 48
   \   000025   30           DB 48
   \   000026   30           DB 48
   \   000027   30           DB 48
   \   000028   00           DB 0

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??FS_Uart_CallBack?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    FS_Uart_CallBack

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??COOR_GW_PeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    COOR_GW_PeriodicMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "10001">`:
   \   000000   31303030     DB "10001"
   \            3100    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "aaaaaa">`:
   \   000000   61616161     DB "aaaaaa"
   \            616100  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SampleApp">`:
   \   000000   53616D70     DB "SampleApp"
   \            6C654170
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "UartIniCOOOK33\\n">`:
   \   000000   55617274     DB "UartIniCOOOK33\012"
   \            496E6943
   \            4F4F4F4B
   \            33330A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {0}>`:
   \   000000   00           DB 0
   \   000001   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000009   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000011   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000019   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000021   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000029   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000031   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000039   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000041   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000049   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000051   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000059   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000061   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000069   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000071   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000079   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000081   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000089   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000091   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000099   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000A1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000A9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000B1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000B9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000C1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000C9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000D1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000D9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000E1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000E9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000F1   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   0000F9   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000101   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000109   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000111   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000119   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000121   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000129   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000131   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000139   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000141   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000149   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000151   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000159   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000161   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000169   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000171   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000179   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000181   00000000     DB 0, 0, 0, 0, 0, 0, 0, 0
   \            00000000
   \   000189   00000000     DB 0, 0, 0, 0, 0, 0, 0
   \            000000  
    598          
    599          //通过串口输出短地址 IEEE
    600          void PrintAddrInfo(uint16 shortAddr, uint8 *pIeeeAddr)
                      ^
Warning[Pe177]: function "PrintAddrInfo" was declared but never referenced
    601          {
    602              uint8 strIeeeAddr[17] = {0};
    603              char  buff[30] = {0};    
    604              
    605              //获得短地址   
    606              sprintf(buff, "shortAddr:%04X   IEEE:", shortAddr);  
    607           
    608              //获得IEEE地址
    609              GetIeeeAddr(pIeeeAddr, strIeeeAddr);
    610          
    611              //HalUARTWrite (HAL_UART_PORT_0, (uint8 *)buff, strlen(buff));
    612              Delay_ms(10);
    613              //HalUARTWrite (HAL_UART_PORT_0, strIeeeAddr, 16); 
    614              //HalUARTWrite (HAL_UART_PORT_0, "\n", 1);
    615          }
    616          
    617          void GetIeeeAddr(uint8 * pIeeeAddr, uint8 *pStr)
    618          {
    619              uint8 i;
    620              uint8 *xad = pIeeeAddr;
    621              
    622              for (i = 0; i < Z_EXTADDR_LEN*2; xad--)
    623              {
    624                  uint8 ch;
    625                  ch = (*xad >> 4) & 0x0F;
    626                  *pStr++ = ch + (( ch < 10 ) ? '0' : '7');
    627                  i++;
    628                  ch = *xad & 0x0F;
    629                  *pStr++ = ch + (( ch < 10 ) ? '0' : '7');
    630                  i++;
    631              }
    632          }
    633          
    634          uint8 XorCheckSum(uint8 * pBuf, uint8 len)
    635          {
    636              uint8 i;
    637              uint8 byRet=0;
    638              if(len == 0)
    639              {
    640                  return byRet;
    641              }
    642                      
    643              byRet = pBuf[0];
    644              for(i = 1; i < len; i ++)
    645              {
    646                  byRet = byRet ^ pBuf[i];
    647              }
    648              return byRet;
    649          }
    650          
    651          uint8 GetDataLen(uint8 fc)
                       ^
Warning[Pe177]: function "GetDataLen" was declared but never referenced

  void AfSendAddrInfo(void)
       ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",420  Warning[Pe177]: 
          function "AfSendAddrInfo" was declared but never referenced

  uint8 XorCheckSum(uint8 * pBuf, uint8 len)
        ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",634  Warning[Pe177]: 
          function "XorCheckSum" was declared but never referenced

  static uint8 SendData(uint8 addr, uint8 FC);
               ^
"G:\STM32_MDK\STM32_Zigbee\Zigbee\Projects\zstack\Samples\SampleApp\Source\SampleApp.c",168  Warning[Pe177]: 
          function "SendData" was declared but never referenced
    652          {
    653              uint8 len=0;
    654              switch(fc)
    655              {
    656                  case 0x0A:
    657                  case 0x0B:
    658                  case 0x0C:
    659                  case 0x0D:
    660                  len = 1;
    661                  break;
    662              }
    663              
    664              return len;
    665          }
    666          
    667          #if defined(ZDO_COORDINATOR)
    668          
    669          #else
    670          
    671          void END_SendPeriodicMessage( void )  //定时发送
    672          { 
    673             LED1 = !LED1;           // LED1灯闪一次
    674          }
    675          uint8 zigbee_send(void)  //发送数据
    676          { 
    677              //发送数据给协调器
    678              if ( AF_DataRequest( &SampleApp_TxAddr, &SampleApp_epDesc,
    679                                 END_RF_PERIODIC_CLUSTERID,
    680                                 len_buff_rx,
    681                                  zigbee_buff_rx,
    682                                 &SampleApp_TransID,
    683                                 0, 
    684                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
    685              {
    686              // Successfully requested to be sent.
    687              }
    688            
    689             //return len_buff_rx;
    690          }
    691          
    692          #endif

   Maximum stack usage in bytes:

     Function                     ISTACK PSTACK XSTACK
     --------                     ------ ------ ------
     COOR_GW_PeriodicMessage          2      0     12
     FS_Uart_CallBack                 0      0      9
       -> Hal_UART_RxBufLen           0      0     18
       -> HalUARTRead                 0      0     18
     SampleApp_HandleKeys             0      0     22
       -> aps_FindGroup               0      0     20
       -> aps_RemoveGroup             0      0     20
       -> aps_AddGroup                0      0     20
     SampleApp_Init                   0      0     43
       -> HalUARTOpen                 0      0     80
       -> HalUARTOpen                 0      0     80
       -> afRegister                  0      0     80
       -> RegisterForKeys             0      0     80
       -> osal_memcpy                 0      0     86
       -> aps_AddGroup                0      0     80
       -> readCoordinatorJumper       0      0     80
       -> ZDOInitDevice               0      0     80
       -> HalLcdWriteString           0      0     80
     SampleApp_MessageMSGCB           2      0    426
       -> osal_memcpy                 0      0    828
       -> HalUARTWrite                0      0    822
     SampleApp_ProcessEvent           0      0     12
       -> osal_msg_receive            0      0     24
       -> HalUARTWrite                0      0     24
       -> osal_rand                   0      0     24
       -> osal_start_timerEx          0      0     24
       -> osal_msg_deallocate         0      0     24
       -> osal_msg_receive            0      0     24
       -> SampleApp_HandleKeys        0      0     24
       -> SampleApp_MessageMSGCB      0      0     24
       -> COOR_GW_PeriodicMessage     0      0     24
       -> osal_rand                   0      0     24
       -> osal_start_timerEx          0      0     24


   Segment part sizes:

     Function/Label                  Bytes
     --------------                  -----
     SendBuf                            8
     end1Online                         1
     end2Online                         1
     end3Online                         1
     end4Online                         1
     end5Online                         1
     end1Time                           2
     end2Time                           2
     end3Time                           2
     end4Time                           2
     end5Time                           2
     endDevInfo                        90
     SampleApp_ClusterList              4
     SampleApp_SimpleDesc              12
     SampleApp_epDesc                   6
     SampleApp_TaskID                   1
     SampleApp_NwkState                 1
     SampleApp_TransID                  1
     Broadcast_DstAddr                 12
     SampleApp_Group                   18
     SampleAppPeriodicCounter           1
     SampleAppFlashCounter              1
     HttpUart_RX                      400
     httpCon1                           2
     httpSendOK                         2
     did                                2
     key                                2
     httpt                              2
     zigbee_buff_rx                   400
     len_buff_rx                        2
     zigbee_id_tx                      10
     sensorData                        41
     SampleApp_Init                   259
     ?Subroutine0                       5
     ?Subroutine3                      19
     ??Subroutine9_0                    5
     FS_Uart_CallBack                  42
     SampleApp_ProcessEvent           164
     ?Subroutine6                      24
     SampleApp_HandleKeys              51
     SampleApp_MessageMSGCB           136
     COOR_GW_PeriodicMessage          326
     ?Subroutine5                       8
     ?Subroutine4                       3
     ??Subroutine8_0                    8
     ?Subroutine7                      10
     ?Subroutine2                       2
     ?Subroutine1                      10
     ?<Initializer for SendBuf>         8
     ?<Initializer for did>             2
     ?<Initializer for key>             2
     ?<Initializer for httpt>           2
     ?<Initializer for sensorData>     41
     ??SampleApp_Init?relay             6
     ??FS_Uart_CallBack?relay           6
     ??SampleApp_ProcessEvent?relay     6
     ??SampleApp_HandleKeys?relay       6
     ??SampleApp_MessageMSGCB?relay     6
     ??COOR_GW_PeriodicMessage?relay    6
     ?<Constant "10001">                6
     ?<Constant "aaaaaa">               7
     ?<Constant "Group 1">              8
     ?<Constant "SampleApp">           10
     ?<Constant "UartIniCOOOK33\n">    16
     ?<Constant {0}>                  400

 
 1 072 bytes in segment BANKED_CODE
    36 bytes in segment BANK_RELAYS
    55 bytes in segment XDATA_I
    55 bytes in segment XDATA_ID
   463 bytes in segment XDATA_ROM_C
   962 bytes in segment XDATA_Z
 
 1 163 bytes of CODE  memory
   463 bytes of CONST memory
 1 017 bytes of XDATA memory

Errors: none
Warnings: 12
